<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dixy</title>
    <link rel="icon" type="image/x-icon" href="assets/logos/dixylogo.ico">
    <link rel="shortcut icon" type="image/x-icon" href="assets/logos/dixylogo.ico">
    <link rel="apple-touch-icon" href="assets/logos/dixylogo.ico">
    <link rel="stylesheet" href="styles/tailwind.css">
    <link rel="stylesheet" href="styles/custom.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<!-- HEADER -->


<body>
    <!-- Mobile Layout -->
    <div class="lg:hidden bg-box fixed top-0 left-0 right-0 z-50 p-4 flex items-center justify-between shadow-lg">
        <div class="flex items-center gap-3">
            <img class="w-10 h-10 rounded-lg object-cover" src="assets/logos/dixylogo.png">
            <h1 class="text-primary font-bold text-lg">AI Read Brief</h1>
        </div>
        <div class="flex items-center gap-3">
            <button id="mobile-library-btn" class="flex justify-center items-center w-10 h-10 rounded-lg bg-primary text-white border-0 cursor-pointer transition-all duration-300 hover:bg-gray-800">
                <span class="text-lg font-bold">â–¤</span>
            </button>
            <button id="mobile-chapters-btn" class="flex justify-center items-center w-10 h-10 rounded-lg bg-primary text-white border-0 cursor-pointer transition-all duration-300 hover:bg-gray-800">
                <span class="text-lg font-bold">â˜°</span>
            </button>
        </div>
    </div>

    <!-- Desktop Layout -->
    <div class="bg-background h-[100vh] w-[100%] p-5 flex gap-10 lg:flex hidden">
        <div class="flex rounded-[20px] h-full gap-10">
            <!-- Main Menu Icons -->
            <div class="bg-box w-[8rem] flex flex-col items-center rounded-[20px] p-4 relative overflow-hidden">
                <img class="w-24 h-24 mb-6 rounded-lg object-cover" src="assets/logos/dixylogo.png">

                <div class="flex justify-center items-center w-12 h-12 mt-5 rounded-xl bg-primary border border-black/10 transition-all duration-300 cursor-pointer select-none shadow-lg hover:bg-gray-800" id="library-menu-button">
                    <span class="text-white text-xl font-bold">â–¤</span>
                </div>

                <div class="flex justify-center items-center w-12 h-12 mt-5 rounded-xl bg-primary border border-black/10 transition-all duration-300 cursor-pointer select-none shadow-lg hover:bg-gray-800" id="chapter-menu-button">
                    <span class="text-white text-xl font-bold">â˜°</span>
                </div>
            </div>

            <!-- Library Menu -->
            <div id="navbar-library" class="bg-box w-[14rem] navbar-library flex flex-col rounded-[20px] h-full overflow-hidden">
                <div class="flex justify-center items-center py-6 px-4 bg-gradient-to-br from-primary to-gray-800 text-white rounded-t-[20px]">
                    <p class="font-semibold text-base m-0">Library</p>
                </div>
                <div id="library-container" class="flex-1 p-4 overflow-y-auto">
                    <!-- Library items will be populated here -->
                </div>
                <div class="p-4 border-t border-gray-200 bg-white/50 flex justify-center items-center">
                    <p class="text-sm font-medium m-0 cursor-pointer py-2.5 px-4 rounded-lg bg-gradient-to-br from-primary to-gray-800 text-white transition-all duration-300 hover:from-gray-800 hover:to-gray-700">
                        + Add library</p>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col bg-white rounded-[20px] p-8">
            <!-- Result Area -->
            <div id="result-content"
                 class="flex-1 p-4 border border-gray-200 rounded-xl overflow-y-auto text-gray-700 leading-relaxed mb-8 bg-gray-50/50">
                <div class="flex items-center justify-center h-full text-gray-400">
                    <p class="text-center">
                        Select a book and some chapters, then click "Generate" to see the summary here.
                    </p>
                </div>
            </div>

            <div class="flex justify-center items-center gap-2">
                <button id="genera-btn"
                        class="inline-flex items-center justify-center px-6 py-3 rounded-2xl font-semibold text-base cursor-pointer transition-all duration-200 shadow-lg bg-primary text-white gap-2 hover:bg-gray-700">
                    Generate
                </button>
                <div class="radio-group flex flex-col gap-3 mt-4">
                    <label class="radio-option flex items-center gap-3 cursor-pointer">
                        <input id="SummarizationRadio" type="radio" name="mode" value="Summarization" checked>
                        <span class="radio-custom"></span>
                        <span class="text-sm font-medium text-gray-700">Summarization</span>
                    </label>
                    <label class="radio-option flex items-center gap-3 cursor-pointer">
                        <input id="CharactersRadio" type="radio" name="mode" value="Characters">
                        <span class="radio-custom"></span>
                        <span class="text-sm font-medium text-gray-700">Characters</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Chapters Menu -->
        <div id="navbar-chapters-container"
             class="navbar-chapters bg-box flex flex-col rounded-[20px] h-full w-[24rem] overflow-hidden">
            <div class="flex justify-center items-center py-6 px-4 bg-gradient-to-br from-primary to-gray-800 text-white rounded-t-[20px]">
                <p class="font-semibold text-base m-0">Chapters</p>
            </div>
            <div id="navbar-chapters" class="flex-1 p-4 overflow-y-auto">
                <!-- Chapters will be populated here -->
            </div>
        </div>
    </div>

    <!-- Mobile Layout -->
    <div class="lg:hidden bg-background min-h-screen pt-20">
        <!-- Mobile Library Drawer -->
        <div id="mobile-library-drawer" class="mobile-drawer-width fixed inset-y-0 left-0 z-40 w-80 bg-box transform -translate-x-full transition-transform duration-300 ease-in-out shadow-xl">
            <div class="h-full flex flex-col">
                <div class="flex items-center justify-between p-4 bg-gradient-to-br from-primary to-gray-800 text-white">
                    <h3 class="font-semibold text-lg">Library</h3>
                    <button id="close-mobile-library" class="w-8 h-8 flex items-center justify-center rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors">
                        <span class="text-lg font-bold">Ã—</span>
                    </button>
                </div>
                <div id="mobile-library-container" class="flex-1 p-4 overflow-y-auto">
                    <!-- Library items will be populated here -->
                </div>
                <div class="p-4 border-t border-gray-200 bg-white/50">
                    <p id="mobile-add-library" class="text-sm font-medium m-0 cursor-pointer py-3 px-4 rounded-lg bg-gradient-to-br from-primary to-gray-800 text-white transition-all duration-300 text-center">+ Add library</p>
                </div>
            </div>
        </div>

        <!-- Mobile Chapters Drawer -->
        <div id="mobile-chapters-drawer" class="mobile-drawer-width fixed inset-y-0 right-0 z-40 w-80 bg-box transform translate-x-full transition-transform duration-300 ease-in-out shadow-xl">
            <div class="h-full flex flex-col">
                <div class="flex items-center justify-between p-4 bg-gradient-to-br from-primary to-gray-800 text-white">
                    <h3 class="font-semibold text-lg">Chapters</h3>
                    <button id="close-mobile-chapters" class="w-8 h-8 flex items-center justify-center rounded-full bg-white/20 hover:bg-white/30 text-white transition-colors">
                        <span class="text-lg font-bold">Ã—</span>
                    </button>
                </div>
                <div id="mobile-navbar-chapters" class="flex-1 p-4 overflow-y-auto">
                    <!-- Chapters will be populated here -->
                </div>
            </div>
        </div>

        <!-- Mobile Backdrop -->
        <div id="mobile-backdrop" class="fixed inset-0 z-30 bg-black/50 opacity-0 pointer-events-none transition-opacity duration-300"></div>

        <!-- Mobile Main Content -->
        <div class="p-4">
            <div class="bg-white rounded-2xl shadow-lg min-h-[calc(100vh-6rem)] flex flex-col">
                <!-- Mobile Result Area -->
                <div id="mobile-result-content" class="flex-1 p-4 border border-gray-200 rounded-xl overflow-y-auto text-gray-700 leading-relaxed mb-4 bg-gray-50/50 min-h-[60vh]">
                    <div class="flex items-center justify-center h-full text-gray-400">
                        <div class="text-center">
                            <span class="text-3xl block mb-3">ðŸ“„</span>
                            <p class="text-center text-sm font-medium mb-2">Select a book and some chapters</p>
                            <p class="text-xs text-gray-500">Then click "Generate" to see the summary</p>
                        </div>
                    </div>
                </div>

                <!-- Mobile Generate Button -->
                <div class="flex justify-center items-center p-4">
                    <button id="mobile-genera-btn" class="w-full max-w-xs inline-flex items-center justify-center px-6 py-4 rounded-2xl font-semibold text-lg cursor-pointer transition-all duration-200 shadow-lg bg-primary text-white gap-3 hover:bg-gray-700 active:scale-95">
                        Generate
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Library Modal -->
    <div id="add-library-modal" class="hidden fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900 m-0">Add a new book</h2>
                <span class="text-gray-400 text-2xl font-bold cursor-pointer transition-colors hover:text-gray-600">&times;</span>
            </div>
            <form id="add-library-form" class="p-6">
                <div class="mb-5">
                    <label for="title" class="block text-sm font-semibold text-gray-700 mb-2">Title *</label>
                    <input type="text" id="title" name="title" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-colors text-base">
                </div>
                <div class="mb-5">
                    <label for="author" class="block text-sm font-semibold text-gray-700 mb-2">Author</label>
                    <input type="text" id="author" name="author" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-colors text-base">
                </div>
                <div class="mb-6">
                    <label for="pdf-file" class="block text-sm font-semibold text-gray-700 mb-2">Upload a PDF</label>
                    <input type="file" id="pdf-file" name="pdf-file" accept=".pdf" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none transition-colors text-base file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-gray-700">
                </div>
                <div class="flex gap-3 justify-end">
                    <button type="button" class="inline-flex items-center justify-center px-6 py-3 border-2 border-primary rounded-2xl font-semibold text-base cursor-pointer transition-all duration-200 bg-gray-50 text-primary gap-2 hover:bg-primary hover:text-white" id="cancel-btn">
                        <span class="text-lg">âœ•</span>
                        Cancel
                    </button>
                    <button type="submit" class="inline-flex items-center justify-center px-6 py-3 border-0 rounded-2xl font-semibold text-base cursor-pointer transition-all duration-200 shadow-lg bg-primary text-white gap-2 hover:bg-gray-700">
                        Add
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chapter Confirmation Modal -->
    <div id="chapter-confirmation" class="modal-chapter">
        <div class="chapter-container">
            <div class="chapter-page-selector bg-background">
                <div class="chapter-header">
                    <h2>Choose a page that contains a chapter and confirm.</h2>
                    <button class="inline-flex items-center justify-center w-10 h-10 p-0 rounded-full border-2 border-primary font-semibold text-lg cursor-pointer transition-all duration-200 bg-gray-50 text-primary hover:bg-primary hover:text-white min-w-[40px]">
                        <span>âœ•</span>
                    </button>
                </div>
                <div class="chapter-page-immagine">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTN59-ODQizLkfZ0BZNpcKNjn6mQu39WRk28w&s" alt="Chapter Page Preview">
                </div>
                <div class="chapter-choser">
                    <button class="prev-btn w-12 h-12 rounded-xl bg-white/90 border border-b-primary flex items-center justify-center cursor-pointer transition-all duration-200 backdrop-blur-md hover:bg-white">
                        <span class="text-2xl font-bold text-primary">â€¹</span>
                    </button>
                    <div class="page-info">
                        <div id="page-number" class="page-number">
                            Page <input type="number" min="1" max="24" value="14"> of 24
                        </div>
                        <input type="range" class="page-slider" min="1" max="24" value="14">
                    </div>
                    <button class="next-btn w-12 h-12 rounded-xl bg-white/90 border border-b-primary flex items-center justify-center cursor-pointer transition-all duration-200 backdrop-blur-md hover:bg-white">
                        <span class="text-2xl font-bold text-primary">â€º</span>
                    </button>
                </div>
                <div class="chapter-actions">
                    <button class="inline-flex items-center justify-center px-6 py-3 border-0 rounded-2xl font-semibold text-base cursor-pointer transition-all duration-200 shadow-lg bg-primary text-white gap-2 hover:-translate-y-0.5 hover:shadow-xl hover:bg-gray-700" id="confirm-page-btn">
                        Confirm Page
                    </button>
                </div>
            </div>
            <div class="chapter-result bg-background" id="chapter-result">
                <div class="result-header">
                    <h3>Extracted Chapters</h3>
                </div>
                <div class="chapter-resut-container">
                    <div class="chapters-list">
                        <h4>Extracted Chapters</h4>
                        <div class="extraction-info">
                            <strong>Book:</strong> <span id="book-name-display">-</span><br>
                            <strong>Total Pages:</strong> <span id="total-pages-display">-</span><br>
                            <strong>Processing Status:</strong> <span id="processing-status">Ready to extract</span>
                        </div>
                        <div class="chapters-container" id="chapters-list-container">
                        </div>
                   </div>
                     </div>
                        <button class="inline-flex items-center justify-center px-6 py-3 border-0 rounded-2xl font-semibold text-base cursor-pointer transition-all duration-200 shadow-lg bg-primary text-white gap-2  hover:shadow-xl hover:bg-gray-700" id="save-chapters-btn" disabled >Save</button>
            </div>
        </div>
    </div>
<script type="module" src="js/main.js"></script>
</body>
</html>